schema: '2.0'
stages:
  download_images_Ardea_herodias:
    cmd: python src/download_images.py data/csv/Ardea_herodias/birds.csv 
      data/images/raw/Ardea_herodias
    deps:
    - path: data/csv/Ardea_herodias/birds.csv
      hash: md5
      md5: c6de8d7c33c73cf54f7d1ed2953bdbc1
      size: 116759
    - path: src/download_images.py
      hash: md5
      md5: a5266f1ee0fc3894f7fbd4ecdbb9ce66
      size: 827
    outs:
    - path: data/images/raw/Ardea_herodias
      hash: md5
      md5: 4d43a46d22852ee52d276ab4e9db0dce.dir
      size: 100005499
      nfiles: 850
  download_images_Ardea_alba_egretta:
    cmd: python src/download_images.py data/csv/Ardea_alba_egretta/birds.csv 
      data/images/raw/Ardea_alba_egretta
    deps:
    - path: data/csv/Ardea_alba_egretta/birds.csv
      hash: md5
      md5: 8abb4a5352df9cd2288e29b3387fc36a
      size: 45578
    - path: src/download_images.py
      hash: md5
      md5: a5266f1ee0fc3894f7fbd4ecdbb9ce66
      size: 827
    outs:
    - path: data/images/raw/Ardea_alba_egretta
      hash: md5
      md5: 0a91e65e0f4f07a04007ac3c22e91019.dir
      size: 29554426
      nfiles: 329
  prepare_dataset:
    cmd: python src/prepare_dataset.py
    deps:
    - path: data/images/raw
      hash: md5
      md5: 92b1b2a7dcb09e658b83ad9650c05432.dir
      size: 344060753
      nfiles: 3018
    - path: src/prepare_dataset.py
      hash: md5
      md5: 0a84bf800b17350e4566103d8471cf81
      size: 1389
    outs:
    - path: data/images/processed
      hash: md5
      md5: ee707e8e7b095b598fad29e0a1b4d0b1.dir
      size: 344060717
      nfiles: 3017
  train:
    cmd: python src/train.py
    deps:
    - path: data/images/processed
      hash: md5
      md5: ee707e8e7b095b598fad29e0a1b4d0b1.dir
      size: 344060717
      nfiles: 3017
    - path: src/train.py
      hash: md5
      md5: 50f5f5b61fb3a91210e6ae04f79b732e
      size: 4610
    params:
      params.yaml:
        train.model: efficientnet_b0
    outs:
    - path: metrics.json
      hash: md5
      md5: 461ff5953d6952521a349f736f6b8c47
      size: 36
    - path: models
      hash: md5
      md5: ef986f2083af1a35b4a2258d52887ba0.dir
      size: 16360505
      nfiles: 1
  download_images_Ardea_cocoi:
    cmd: python src/download_images.py data/csv/Ardea_cocoi/birds.csv 
      data/images/raw/Ardea_cocoi
    deps:
    - path: data/csv/Ardea_cocoi/birds.csv
      hash: md5
      md5: 577d2cafef05620efbdb9114b453b5be
      size: 53401
    - path: src/download_images.py
      hash: md5
      md5: a5266f1ee0fc3894f7fbd4ecdbb9ce66
      size: 827
    outs:
    - path: data/images/raw/Ardea_cocoi
      hash: md5
      md5: 8e4f9e9503af76042b0a3f21d1e70d3b.dir
      size: 43086892
      nfiles: 390
  download_images_Ardea_ibis:
    cmd: python src/download_images.py data/csv/Ardea_ibis/birds.csv 
      data/images/raw/Ardea_ibis
    deps:
    - path: data/csv/Ardea_ibis/birds.csv
      hash: md5
      md5: ed3fca99d2791514ba0ad58a49a540a3
      size: 43451
    - path: src/download_images.py
      hash: md5
      md5: a5266f1ee0fc3894f7fbd4ecdbb9ce66
      size: 827
    outs:
    - path: data/images/raw/Ardea_ibis
      hash: md5
      md5: c3a6e75eb176d32241209d0e4a05625b.dir
      size: 47459832
      nfiles: 347
  download_images_Ardea_melanocephala:
    cmd: python src/download_images.py data/csv/Ardea_melanocephala/birds.csv 
      data/images/raw/Ardea_melanocephala
    deps:
    - path: data/csv/Ardea_melanocephala/birds.csv
      hash: md5
      md5: eda1d46e132e87e019b5901d738ce884
      size: 194455
    - path: src/download_images.py
      hash: md5
      md5: a5266f1ee0fc3894f7fbd4ecdbb9ce66
      size: 827
    outs:
    - path: data/images/raw/Ardea_melanocephala
      hash: md5
      md5: 5ab7e02ede171258dfa35a70e1ac3cc4.dir
      size: 38401583
      nfiles: 371
  download_images_Ardea_purpurea:
    cmd: python src/download_images.py data/csv/Ardea_purpurea/birds.csv 
      data/images/raw/Ardea_purpurea
    deps:
    - path: data/csv/Ardea_purpurea/birds.csv
      hash: md5
      md5: f616d3bad31c82b3b9f57571f3b2e300
      size: 39079
    - path: src/download_images.py
      hash: md5
      md5: a5266f1ee0fc3894f7fbd4ecdbb9ce66
      size: 827
    outs:
    - path: data/images/raw/Ardea_purpurea
      hash: md5
      md5: a87a4b1c4cb79918d2175d4758370374.dir
      size: 38696038
      nfiles: 335
  download_images_Ardeola:
    cmd: python src/download_images.py data/csv/Ardeola/birds.csv 
      data/images/raw/Ardeola
    deps:
    - path: data/csv/Ardeola/birds.csv
      hash: md5
      md5: ccf250884f32935bd2bc6fb3ea305cd6
      size: 51333
    - path: src/download_images.py
      hash: md5
      md5: a5266f1ee0fc3894f7fbd4ecdbb9ce66
      size: 827
    outs:
    - path: data/images/raw/Ardeola
      hash: md5
      md5: e4dd65779f34d18c168e8554bf4a88f5.dir
      size: 46856447
      nfiles: 395
  extract_embeddings:
    cmd: python src/extract_embeddings.py
    deps:
    - path: data/images
      hash: md5
      md5: fe1f3d678cdf3ec615eea8942febebc0.dir
      size: 688121470
      nfiles: 6035
    - path: models/best_model.pt
      hash: md5
      md5: b34a812d7f805b9dcd4fdc66f34be2d2
      size: 16360505
    - path: src/extract_embeddings.py
      hash: md5
      md5: 93309c163a3702dbdbc8e6a2be87b524
      size: 2916
    params:
      params.yaml:
        train.model: efficientnet_b0
    outs:
    - path: embeddings
      hash: md5
      md5: d5bfad139cf4ff208273d4fcf12d849d.dir
      size: 17117086
      nfiles: 6
